@using Backend.Models.Features.Jobs
@using Frontend.Components
@using Frontend.Features.Jobs.Models

@if (Job != null)
{
    <td>@Job.Model.Name</td>
    <td>@Job.Model.Scenario</td>

    <td>
        @if (OnEdit != null)
        {
            <button class="btn btn-primary" @onclick="@OnEditPressed">Edit</button>
        }
    </td>

@*     <div class="card"> *@
@*         <div class="card-body"> *@
@*             <EditableInputComponent Label="Name" Edit="@_editMode" @bind-Value="@Job.Model.Name"/> *@
@*             <EditableInputComponent Label="Count" Edit="@_editMode" @bind-Value="@Job.Model.BotsCount"/> *@
@*         </div> *@
@*         <div class="card-footer"> *@
@*             @if (_editMode) *@
@*             { *@
@*                 <button class="btn btn-primary" @onclick="@Save">Save</button> *@
@*                 <button class="btn btn-danger" @onclick="@Cancel">Cancel</button> *@
@*             } *@
@*             else *@
@*             { *@
@*                 <button class="btn btn-primary" @onclick="@EnterEditMode">Edit</button> *@
@*             } *@
@*         </div> *@
@*     </div> *@
}

@code
{
    [Parameter]
    public JobModelView? Job { get; set; }

    [Parameter]
    public Func<JobModelView, Task>? OnEdit { get; set; }

    // private bool _editMode;
    // private string? _jobId;

    // private JobModelView? _originalJob;

    protected override void OnParametersSet()
    {
    // if (Job != null)
    // {
    //     _jobId = $"job_{Job.JobId.ToString()}";
    // }
    }

    private async Task OnEditPressed()
    {
        if (OnEdit != null && Job != null)
        {
            await OnEdit(Job);
        }
    }

    // private void EnterEditMode()
    // {
    //     _editMode = true;
    //
    //     if (Job != null)
    //     {
    //         // _originalJob = Job;
    //
    //         // Job = new JobModel(_originalJob.JobId, _originalJob.Name, _originalJob.BotsCount);
    //     }
    // }

    // private async Task Save()
    // {
    //     _editMode = false;
    //
    //     if (Job != null && OnEditPressed != null)
    //     {
    //         await OnEditPressed(Job);
    //     }
    //
    // // _originalJob = null;
    // }

    // private void Cancel()
    // {
    //     _editMode = false;
    //
    //     // Job = _originalJob;
    //     // _originalJob = null;
    // }

    // private bool IsActive(JobModelView job) => job.Status == JobModelViewStatus.Active;
}